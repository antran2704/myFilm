{"ast":null,"code":"import _regeneratorRuntime from\"E:/sourceCode/myFilm/film/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/sourceCode/myFilm/film/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/sourceCode/myFilm/film/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./Search.scss\";import SearchItem from\"./SearchItem\";import{useViewport}from\"../../../hook\";import{useLocation}from\"react-router-dom\";import{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{AiOutlineLoading}from\"react-icons/ai\";import*as types from\"../../../store/action\";import Modal from\"../../Modal/Modal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useQuery=function useQuery(){return new URLSearchParams(useLocation().search);};function Search(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showModal=_useState4[0],setShowModal=_useState4[1];var dispath=useDispatch();var keywords=useQuery().get(\"keywords\");var _useViewport=useViewport(),_useViewport2=_slicedToArray(_useViewport,1),width=_useViewport2[0];var _useSelector=useSelector(function(state){return state.movie;}),SearchMovie=_useSelector.SearchMovie;var movies=[SearchMovie];var search=keywords.normalize(\"NFD\").toLowerCase().replace(\":\",\"\").replace(/ /g,\"-\").replace(/[\\u0300-\\u036f]/g,\"\").replace(/đ/g,\"d\").replace(/Đ/g,\"D\");useEffect(function(){var handler=setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.next=3;return dispath(types.searchMovie(search.trim()));case 3:setLoading(false);case 4:case\"end\":return _context.stop();}}},_callee);})),800);return function(){clearTimeout(handler);};},[search]);return/*#__PURE__*/_jsxs(\"div\",{className:\"search\",style:width>1200?{gridTemplateColumns:\"repeat(5,auto)\"}:width>1000?{gridTemplateColumns:\"repeat(4,auto)\"}:width>760?{gridTemplateColumns:\"repeat(3,auto)\"}:width>600?{gridTemplateColumns:\"repeat(2,auto)\"}:{gridTemplateColumns:\"repeat(1,auto)\"},children:[SearchMovie&&movies.map(function(data,index){return/*#__PURE__*/_jsx(SearchItem,{data:data},index);}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"search_loading\",children:/*#__PURE__*/_jsx(AiOutlineLoading,{className:\"search_loading-icon\"})})]});}export default Search;","map":{"version":3,"names":["SearchItem","useViewport","useLocation","useEffect","useState","useDispatch","useSelector","AiOutlineLoading","types","Modal","useQuery","URLSearchParams","search","Search","loading","setLoading","showModal","setShowModal","dispath","keywords","get","width","state","movie","SearchMovie","movies","normalize","toLowerCase","replace","handler","setTimeout","searchMovie","trim","clearTimeout","gridTemplateColumns","map","data","index"],"sources":["E:/sourceCode/myFilm/film/src/components/Pages/Search/Search.jsx"],"sourcesContent":["import \"./Search.scss\";\r\nimport SearchItem from \"./SearchItem\";\r\nimport { useViewport } from \"../../../hook\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { AiOutlineLoading } from \"react-icons/ai\";\r\nimport * as types from \"../../../store/action\";\r\nimport Modal from \"../../Modal/Modal\";\r\n\r\nconst useQuery = () => new URLSearchParams(useLocation().search);\r\n\r\nfunction Search() {\r\n  const [loading, setLoading] = useState(true);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const dispath = useDispatch();\r\n  const keywords = useQuery().get(\"keywords\");\r\n  const [width] = useViewport();\r\n  const { SearchMovie } = useSelector((state) => state.movie);\r\n  let movies = [SearchMovie] \r\n  const search = keywords\r\n    .normalize(\"NFD\")\r\n    .toLowerCase()\r\n    .replace(\":\",\"\")\r\n    .replace(/ /g, \"-\")\r\n    .replace(/[\\u0300-\\u036f]/g, \"\")\r\n    .replace(/đ/g, \"d\")\r\n    .replace(/Đ/g, \"D\");\r\n  useEffect(() => {\r\n    const handler = setTimeout(async () => {\r\n      setLoading(true);\r\n      await dispath(types.searchMovie(search.trim()));\r\n      setLoading(false);\r\n    }, 800);\r\n\r\n    return () => {\r\n      clearTimeout(handler);\r\n    };\r\n  }, [search]);\r\n\r\n  \r\n  return (\r\n    <div\r\n      className=\"search\"\r\n      style={\r\n        width > 1200\r\n          ? { gridTemplateColumns: \"repeat(5,auto)\" }\r\n          : width > 1000\r\n          ? { gridTemplateColumns: \"repeat(4,auto)\" }\r\n          : width > 760\r\n          ? { gridTemplateColumns: \"repeat(3,auto)\" }\r\n          : width > 600\r\n          ? { gridTemplateColumns: \"repeat(2,auto)\" }\r\n          : { gridTemplateColumns: \"repeat(1,auto)\" }\r\n      }\r\n    >\r\n      {SearchMovie &&\r\n        movies.map(function (data, index) {\r\n            return (<SearchItem key={index} data={data} />)\r\n        })}\r\n\r\n      {loading && (\r\n        <div className=\"search_loading\">\r\n          <AiOutlineLoading className=\"search_loading-icon\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Search;\r\n"],"mappings":"6VAAA,MAAO,eAAP,CACA,MAAOA,WAAP,KAAuB,cAAvB,CACA,OAASC,WAAT,KAA4B,eAA5B,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,gBAAT,KAAiC,gBAAjC,CACA,MAAO,GAAKC,MAAZ,KAAuB,uBAAvB,CACA,MAAOC,MAAP,KAAkB,mBAAlB,C,wFAEA,GAAMC,SAAQ,CAAG,QAAXA,SAAW,SAAM,IAAIC,gBAAJ,CAAoBT,WAAW,GAAGU,MAAlC,CAAN,EAAjB,CAEA,QAASC,OAAT,EAAkB,CAChB,cAA8BT,QAAQ,CAAC,IAAD,CAAtC,wCAAOU,OAAP,eAAgBC,UAAhB,eACA,eAAkCX,QAAQ,CAAC,KAAD,CAA1C,yCAAOY,SAAP,eAAkBC,YAAlB,eACA,GAAMC,QAAO,CAAGb,WAAW,EAA3B,CACA,GAAMc,SAAQ,CAAGT,QAAQ,GAAGU,GAAX,CAAe,UAAf,CAAjB,CACA,iBAAgBnB,WAAW,EAA3B,8CAAOoB,KAAP,kBACA,iBAAwBf,WAAW,CAAC,SAACgB,KAAD,QAAWA,MAAK,CAACC,KAAjB,EAAD,CAAnC,CAAQC,WAAR,cAAQA,WAAR,CACA,GAAIC,OAAM,CAAG,CAACD,WAAD,CAAb,CACA,GAAMZ,OAAM,CAAGO,QAAQ,CACpBO,SADY,CACF,KADE,EAEZC,WAFY,GAGZC,OAHY,CAGJ,GAHI,CAGA,EAHA,EAIZA,OAJY,CAIJ,IAJI,CAIE,GAJF,EAKZA,OALY,CAKJ,kBALI,CAKgB,EALhB,EAMZA,OANY,CAMJ,IANI,CAME,GANF,EAOZA,OAPY,CAOJ,IAPI,CAOE,GAPF,CAAf,CAQAzB,SAAS,CAAC,UAAM,CACd,GAAM0B,QAAO,CAAGC,UAAU,wEAAC,qIACzBf,UAAU,CAAC,IAAD,CAAV,CADyB,sBAEnBG,QAAO,CAACV,KAAK,CAACuB,WAAN,CAAkBnB,MAAM,CAACoB,IAAP,EAAlB,CAAD,CAFY,QAGzBjB,UAAU,CAAC,KAAD,CAAV,CAHyB,sDAAD,GAIvB,GAJuB,CAA1B,CAMA,MAAO,WAAM,CACXkB,YAAY,CAACJ,OAAD,CAAZ,CACD,CAFD,CAGD,CAVQ,CAUN,CAACjB,MAAD,CAVM,CAAT,CAaA,mBACE,aACE,SAAS,CAAC,QADZ,CAEE,KAAK,CACHS,KAAK,CAAG,IAAR,CACI,CAAEa,mBAAmB,CAAE,gBAAvB,CADJ,CAEIb,KAAK,CAAG,IAAR,CACA,CAAEa,mBAAmB,CAAE,gBAAvB,CADA,CAEAb,KAAK,CAAG,GAAR,CACA,CAAEa,mBAAmB,CAAE,gBAAvB,CADA,CAEAb,KAAK,CAAG,GAAR,CACA,CAAEa,mBAAmB,CAAE,gBAAvB,CADA,CAEA,CAAEA,mBAAmB,CAAE,gBAAvB,CAXR,WAcGV,WAAW,EACVC,MAAM,CAACU,GAAP,CAAW,SAAUC,IAAV,CAAgBC,KAAhB,CAAuB,CAC9B,mBAAQ,KAAC,UAAD,EAAwB,IAAI,CAAED,IAA9B,EAAiBC,KAAjB,CAAR,CACH,CAFD,CAfJ,CAmBGvB,OAAO,eACN,YAAK,SAAS,CAAC,gBAAf,uBACE,KAAC,gBAAD,EAAkB,SAAS,CAAC,qBAA5B,EADF,EApBJ,GADF,CA2BD,CAED,cAAeD,OAAf"},"metadata":{},"sourceType":"module"}